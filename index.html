<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stoploss & Target Calculator</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#007bff">

<style>
  body { font-family: Arial, sans-serif; background: #f7f7f7; padding: 20px; }
  .container { max-width: 400px; background: white; margin: auto; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  h2 { text-align: center; margin-bottom: 20px; }
  label { margin-top: 10px; display: block; font-weight: bold; }
  input { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; }
  button { width: 100%; margin-top: 15px; padding: 10px; background: #007bff; color: white; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #0056b3; }
  .result { margin-top: 20px; background: #eef; padding: 15px; border-radius: 5px; }
  .result p { margin: 8px 0; font-size: 16px; font-weight: bold; }
</style>
</head>
<body>

<div class="container">
  <h2>Stoploss & Target Calculator</h2>
  
  <label for="entryPrice">Entry Price (₹)</label>
  <input type="number" id="entryPrice" placeholder="e.g. 100000">
  
  <label for="lossPercent">Stoploss %</label>
  <input type="number" id="lossPercent" placeholder="e.g. 1">
  
  <label for="targetPercent">Target %</label>
  <input type="number" id="targetPercent" placeholder="e.g. 2">
  
  <button onclick="calculate()">Calculate</button>
  
  <div class="result" id="result"></div>
</div>

<script>
function calculate() {
  const entryPrice = parseFloat(document.getElementById('entryPrice').value);
  const lossPercent = parseFloat(document.getElementById('lossPercent').value);
  const targetPercent = parseFloat(document.getElementById('targetPercent').value);

  if (isNaN(entryPrice) || isNaN(lossPercent) || isNaN(targetPercent)) {
    alert("Please fill in all fields with numbers.");
    return;
  }

  const stoplossPrice = entryPrice - (entryPrice * lossPercent / 100);
  const targetPrice = entryPrice + (entryPrice * targetPercent / 100);

  const stoplossDiff = entryPrice - stoplossPrice;
  const targetDiff = targetPrice - entryPrice;

  document.getElementById('result').innerHTML = `
    <p>Stoploss Price: ₹${stoplossPrice.toFixed(2)} (-₹${stoplossDiff.toFixed(2)})</p>
    <p>Target Price: ₹${targetPrice.toFixed(2)} (+₹${targetDiff.toFixed(2)})</p>
  `;
}

// Register Service Worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js')
    .then(() => console.log("Service Worker Registered"));
}
</script>
</body>
</html>